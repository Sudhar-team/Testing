CREATE DATABASE SUDHAR;

USE SUDHAR;

-- STUDENT TABLE --

CREATE TABLE STUDENT(
	id INTEGER AUTO_INCREMENT PRIMARY KEY,
	NAME VARCHAR(255) NOT NULL,
	USERNAME VARCHAR(255) UNIQUE NOT NULL,
	PASSWORD VARCHAR(255) NOT NULL,
	EMAIL VARCHAR(320) UNIQUE NOT NULL,
	PHONE_NUMBER VARCHAR(255) UNIQUE NOT NULL,
	ENGINEERING_BRANCH VARCHAR(255) NOT NULL,
	GENDER VARCHAR(10),
	CITY VARCHAR(255) NOT NULL,
	CREATED_AT TIMESTAMP DEFAULT NOW()
	);

-- COLLEGE TABLE --

CREATE TABLE COLLEGE(
	id INTEGER AUTO_INCREMENT PRIMARY KEY,
	COLLEGE_NAME VARCHAR(255) UNIQUE NOT NULL
	);

-- COURSE TABLE --

CREATE TABLE COURSE(
	id INTEGER AUTO_INCREMENT PRIMARY KEY,
	COURSE_ID VARCHAR(255) UNIQUE NOT NULL,
	COURSE_NAME VARCHAR(255) UNIQUE NOT NULL,
	COURSE_BRANCH VARCHAR(255),
	COURSE_DESCRIPTION TEXT
	);

-- CONSULTANCY -- 

CREATE TABLE COUNSULTANCY(
	id INTEGER AUTO_INCREMENT PRIMARY KEY,
	COUNSULTANCY_NAME VARCHAR(255) UNIQUE NOT NULL
);


-- COLLEGE STUDENT --

CREATE TABLE COLLEGE_STUDENT(
	STUDENT_ID INTEGER UNIQUE NOT NULL,
	COLLEGE_ID INTEGER NOT NULL,
	FOREIGN KEY (STUDENT_ID) REFERENCES STUDENT(id),
	FOREIGN KEY (COLLEGE_ID) REFERENCES COLLEGE(id)
	);

-- COURSE FOR COLLEGE --

CREATE TABLE COURSE_COLLEGE(
	COURSE_ID INTEGER NOT NULL,
	COLLEGE_ID INTEGER NOT NULL,
	FOREIGN KEY (COURSE_ID) REFERENCES COURSE(id),
	FOREIGN KEY (COLLEGE_ID) REFERENCES COLLEGE(id),
	PRIMARY KEY(COURSE_ID,COLLEGE_ID)
	);

-- COURSE LIKES --

CREATE TABLE LIKES(
	STUDENT_ID INTEGER NOT NULL,
	COURSE_ID INTEGER NOT NULL,
	CREATED_AT TIMESTAMP DEFAULT NOW(),
	FOREIGN KEY (STUDENT_ID) REFERENCES STUDENT(id),
	FOREIGN KEY (COURSE_ID) REFERENCES COURSE(id),
	PRIMARY KEY(STUDENT_ID,COURSE_ID)
	);

-- COURSE LIKES --

CREATE TABLE CONSULTANCY_COURSE(
	CONSULTANCY_ID INTEGER NOT NULL,
	COURSE_ID INTEGER NOT NULL,
	FOREIGN KEY (CONSULTANCY_ID) REFERENCES COUNSULTANCY(id),
	FOREIGN KEY (COURSE_ID) REFERENCES COURSE(id),
	PRIMARY KEY(CONSULTANCY_ID,COURSE_ID)
	);


CREATE TABLE CONSULTANCY_COLLEGE(
	CONSULTANCY_ID INTEGER NOT NULL,
	COLLEGE_ID INTEGER NOT NULL,
	FOREIGN KEY (CONSULTANCY_ID) REFERENCES COUNSULTANCY(id),
	FOREIGN KEY (COLLEGE_ID) REFERENCES COLLEGE(id),
	PRIMARY KEY(CONSULTANCY_ID,COLLEGE_ID)
	);

